
{
  "type":"acrn",
  "log": {
    "ttyUSB2": {
      "tag": [
        {
          "name":"init",
          "filter": "Wakeup button state"
        },
        {
          "name":"pmic_ok",
          "filter": "PMIC OK"
        }
      ],
      "config": {
        "log_name": "ttyUSB2.log",
        "filter_time_pattern": "\\d+s\\d+ms",
        "parent_axis": "ttyUSB3"
      }
    },
    "logcat": {
      "tag": [
        {
          "name": "pEvsListener",
          "filter": "EVS app starting"
        },
        {
          "name": "pStateController",
          "filter": "Entering running state"
        },
        {
          "name": "EvsHAL",
          "filter": "returnTargetBufferForDisplay: Image Rendered"
        },
        {
          "name": "init_2_start",
          "filter": "init second stage started"
        },
        {
          "name": "try_to_mount_data",
          "filter": "cryptfs mountdefaultencrypted"
        },
        {
          "name": "android_start",
          "filter": "boot_progress_start"
        },
        {
          "name": "preload_start",
          "filter": "boot_progress_preload_start"
        },
        {
          "name": "preload_end",
          "filter": "boot_progress_preload_end"
        },
        {
          "name": "system_run",
          "filter": "boot_progress_system_run"
        },
        {
          "name": "pms_system_scan_start",
          "filter": "boot_progress_pms_system_scan_start"
        },
        {
          "name": "pms_data_scan_start",
          "filter": "boot_progress_pms_data_scan_start"
        },
        {
          "name": "pms_scan_end",
          "filter": "boot_progress_pms_scan_end"
        },
        {
          "name": "pms_ready",
          "filter": "boot_progress_pms_ready"
        },
        {
          "name": "zygote_launched",
          "filter": "START com.android.internal.os.ZygoteInit"
        },
        {
          "name": "init_selinux",
          "filter": "Initializing SELinux"
        },
        {
          "name": ".coldboot_done",
          "filter": "Waiting for /dev/.coldboot_done took"
        },
        {
          "name": "wait_for_coldboot_done",
          "filter": "Command 'wait_for_coldboot_done' action=wait_for_coldboot_done returned 0 took"
        },
        {
          "name": "verity_load_state",
          "filter": "Command 'verity_load_state' action="
        },
        {
          "name": "mount_all_fstab",
          "filter": "Command 'mount_all /fstab"
        },
        {
          "name": "verity_update_state",
          "filter": "Command 'verity_update_state' action="
        },
        {
          "name": "init_user0",
          "filter": "Command 'init_user0' action="
        },
        {
          "name": "zygote_forked",
          "filter": "starting service 'zygote'"
        },
        {
          "name": "data_preparation_start",
          "filter": "starting service 'vold'"
        },
        {
          "name": "setprop_persist.service.aplogfs.enable_0",
          "filter": "Command 'setprop persist.service.aplogfs.enable 0' action="
        },
        {
          "name": "load_default_prop",
          "filter": "Loading properties from /default.prop took"
        },
        {
          "name": "load_system_prop",
          "filter": "Loading properties from /system/build.prop took"
        },
        {
          "name": "load_vendor_prop",
          "filter": "Loading properties from /vendor/build.prop took"
        },
        {
          "name": "load_factory_prop",
          "filter": "Loading properties from /factory/factory.prop took"
        },
        {
          "name": "load_data_local_prop",
          "filter": "Loading properties from /data/local.prop took"
        },
        {
          "name": "finish_mount_system",
          "filter": "__mount\\(source=([^,]+),target=/system,type=(\\w+)\\)=0"
        },
        {
          "name": "finish_mount_cache",
          "filter": "__mount\\(source=([^,]+),target=/cache,type=(\\w+)\\)=0"
        },
        {
          "name": "finish_mount_config",
          "filter": "__mount\\(source=([^,]+),target=/config,type=(\\w+)\\)=0"
        },
        {
          "name": "finish_mount_data",
          "filter": "__mount\\(source=([^,]+),target=/data,type=(\\w+)\\)=0"
        },
        {
          "name": "try_mount_data",
          "filter": "__mount\\(source=([^,]+),target=/data,type=(\\w+)\\)=-+[\\d]+"
        },
        {
          "name": "display_launcher",
          "filter": "Displayed com.google.android.googlequicksearchbox"
        },
        {
          "name": "driver_igb_avb_inited",
          "filter": "Using MSI-X interrupts"
        },
        {
          "name": "driver_snd_soc_skl_inited",
          "filter": "ROM loaded, continue FW loading"
        },
        {
          "name": "kernel_end",
          "filter": "init first stage started"
        },
        {
          "name": "start_alarmService",
          "filter": "SystemServerTiming\\(\\s+\\d+\\):\\sStartAlarmManagerService took to complete"
        },
        {
          "name": "ams_ready",
          "filter": "boot_progress_ams_ready"
        },
        {
          "name": "systemui_start",
          "filter": "StartSystemUI"
        },
        {
          "name": "enable_screen",
          "filter": "boot_progress_enable_screen"
        },
        {
          "name": "boot_is_finished",
          "filter": "Boot is finished"
        },
        {
          "name": "boot_is_finished",
          "filter": "Starting phase 1000"
        }
      ],
      "config": {
        "log_name": "logcat.log",
        "filter_time_pattern": "\\d+:\\d+:\\d+.\\d+",
        "parent_axis": "dmesg"
      }
    },
    "dmesg": {
      "tag": [
        {
           "name":"Gigabit_Ethernet",
           "filter":"Gigabit Ethernet Network Driver"
        },
        {
          "name": "kernel_start",
          "filter": "Linux version"
        },
        {
          "name": "AlSA_init",
          "filter": "Advanced Linux Sound Architecture Driver Initialized"
        },
        {
          "name": "Ethernet_Link_Up",
          "filter": "eth0 NIC Link is Up"
        },
        {
          "name": "GPTP_start",
          "filter": "init: starting service 'gptp_a'"
        },
        {
          "name": "avbstreamhandler_start",
          "filter": "init: starting service 'avbstreamhandler'"
        },
        {
          "name": "avbstreamhandler_ready",
          "filter": "avb.streamhandler.ready=true"
        },
        {
          "name": "earlyavbaudio_start",
          "filter": "init: starting service 'earlyavbaudio'"
        },
        {
          "name": "earlyavbaudio_exit",
          "filter": "init: Service 'earlyavbaudio'"
        },
        {
          "name": "early_audio_start",
          "filter": "init: starting service 'earlyaudioalsa'"
        },
        {
          "name": "Querying_NHLT",
          "filter": "snd_soc_skl 0000:00:0e.0: Querying NHLT blob"
        },
        {
          "name": "early_audio_exit",
          "filter": "init: Service 'earlyaudioalsa'"
        },
        {
          "name": "kernel_end",
          "filter": "init first stage started"
        },
        {
          "name": "evs_start",
          "filter": "early EVS started"
        },
        {
          "name": "evs_ready",
          "filter": "first frame to screen"
        },
        {
          "name": "mount_all_start",
          "filter": "init: processing action (late-init) from"
        },
        {
          "name": "root_mount_start",
          "filter": "device-mapper: init: attempting early device configuration"
        },
        {
          "name": "wlan_Driver_loaded",
          "filter": "wlan: Driver loaded successfully"
        }
      ],
      "config": {
        "log_name": "dmesg.log",
        "filter_time_pattern": "\\d+.\\d+",
        "parent_axis": "journal"
      }
    },
    "ttyUSB3": {
      "tag": [
        {
          "name":"Acrn_start",
          "filter": "==> jump to image"
        },
        {
          "name":"Acrn_end",
          "filter": "Start VM0"
        },
        {
          "name":"sos_start",
          "filter": "Start VM0"
        },
        {
          "name":"sos_end",
          "filter": "Starting Journal Service"
        },
        {
          "name":"sos_end",
          "filter": "Started Journal Service"
        },
        {
          "name":"start_VM1",
          "filter": "Start Secondary VCPU1 for VM"
        },
        {
          "name":"Lanch_login",
          "filter": "login:"
        },
        {
          "name":"Lanch_login",
          "filter": "Launch android UOS"
        },
        {
          "name":"handover_jump",
          "filter": "handover jump"
        },
        {
          "name": "Trusty_ready",
          "filter": "VMM: Launch Android"
        },
        {
          "name": "handover_jump",
          "filter": "handover jump"
        },
        {
          "name": "Bootloader2_ready",
          "filter": "jmp 0x00100000"
        },
        {
          "name":"login_Service",
          "filter": "Started Login Service"
        }
      ],
      "config": {
        "log_name": "ttyUSB3.log",
        "filter_time_pattern": "\\d+.\\d+",
        "parent_axis": "main"
      }
    },
    "journal": {
      "tag": [
        {
           "name":"Gigabit_Ethernet",
           "filter":"Gigabit Ethernet Network Driver"
        },
        {
          "name":"Acrnd_start",
          "filter": "cpu1 online=1"
        },
        {
          "name":"login_Service",
          "filter": "Started Login Service"
        },
        {
          "name": "wlan_Driver_loaded",
          "filter": "wlan: Driver loaded successfully"
        },
        {
          "name":"Starting_kernel",
          "filter": "Starting Kernel"
        },
        {
          "name":"Stage1B_entry_point",
          "filter": "Stage1B entry point"
        },
        {
          "name":"Stage2_entry_point",
          "filter": "Stage2 entry point"
        },
        {
          "name": "Bootloader1_ready",
          "filter": "welcome to lk"
        }
      ],
      "config": {
        "log_name": "journal.log",
        "filter_time_pattern": "\\d+:\\d+:\\d+.\\d+",
        "parent_axis": "ttyUSB3"
      }
    }
  },
  "capture":{
    "thread": [
      "python %s/src/grabserial.py -v -d '%s' -b 115200 -w 8 -p N -s 1 -e 60 -t -P %s -u %s -o %s"
    ],
    "commands": [
      "adb shell screencap -p /sdcard/screencap.png && adb pull /sdcard/screencap.png %s",
      "rm ~/.ssh/known_hosts",
      "adb root",
      "sleep 1",
      "adb shell dmesg > %s/dmesg.log",
      "adb logcat -v time -b all -d > %s/logcat.log",
      "adb pull /data/vendor/dptf/record_cpu.log %s",
      "sshpass -p %s scp -o StrictHostKeychecking=no %s:~/journal.log %s"
    ]
  },
  "stage":{
    "step_Pre_UOS":[
      {
        "name":"init->bootloader",
        "start":"init",
        "end":"Acrn_start",
        "durations":["init","pmic_ok","CSE_Start","stage-0_start", "stage-0_done", "CSE_ready_to_send_IBBM", "stage-1_loaded", "pre-MRC_hw_init_done", "received_ABL_config_over_IPC", "probed_CP_PCB_start_MRC", "MRC_parameters_loaded", "RMT_start", "send_DID", "set_pnit_reset", "stage-1_done", "stage-2_start", "PCIe_Root_Port_init_start", "PCIe_init_done", "Image_load_done", "Image_CRC_done", "eMMC/SD_init_done", "image_DL_start", "image_DL_end", "VMM_start","Stage1A_entry","Stage1B_entry","Stage2_entry", "Acrn_start"]
      },
      {
        "name":"Hypervisor",
        "start":"Acrn_start",
        "end":"Acrn_end",
        "durations":["Acrn_start","Acrn_end"]
      },
      {
        "name":"sos",
        "start":"sos_start",
        "end":"sos_end",
        "durations":["sos_start","sos_end"]

      },
      {
        "name":"sos->kernel",
        "start":"sos_end",
        "end":"kernel_start",
        "durations":["sos_end","kernel_start"]
      }
    ],
    "step_UOS_Kernel":[
      {
        "name":"init->kernel_start",
        "start":"init",
        "end":"kernel_start",
        "durations":["init","kernel_start"]
      },
      {
        "name":"kernel",
        "start":"kernel_start",
        "end":"kernel_end",
        "durations":["kernel_start","AlSA_init","root_mount_start","kernel_end"]
      }
    ],
    "step_UOS_Android":[
      {
        "name":"init->kernel_end",
        "start":"init",
        "end":"kernel_end",
        "durations":["init","kernel_end"]
      },
      {
        "name":"kernel_end->init2_stage",
        "start":"kernel_end",
        "end":"init_2_start",
        "durations":["kernel_end","init_2_start"]
      },
      {
        "name":"init2_stage->android_start",
        "start":"init_2_start",
        "end":"android_start",
        "durations":["init_2_start","finish_mount_data","zygote_launched","zygote_forked","android_start"]
      },
      {
        "name":"android_start->boot_is_finished",
        "start":"android_start",
        "end":"boot_is_finished",
        "durations":["android_start","pEvsListener","pStateController","preload_start","preload_end","system_run","pms_system_scan_start","pms_data_scan_start","pms_scan_end","pms_ready","start_alarmService","ams_ready","systemui_start","enable_screen","boot_is_finished"]
      }
    ]
  }
}
